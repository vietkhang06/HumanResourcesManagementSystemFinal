<Window x:Class="HumanResourcesManagementSystemFinal.Views.AddEmployeeWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:HumanResourcesManagementSystemFinal.ViewModels"
        xmlns:converters="clr-namespace:HumanResourcesManagementSystemFinal.Converters"
        Title="Thêm Nhân Viên" Height="630" Width="750"
        WindowStartupLocation="CenterScreen" WindowStyle="None" 
        AllowsTransparency="True" Background="Transparent" ResizeMode="NoResize"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">

    <Window.DataContext>
        <vm:AddEmployeeViewModel/>
    </Window.DataContext>

    <Window.Resources>
        <converters:MultiParameterConverter x:Key="MultiParamConverter"/>

        <Style TargetType="TextBox">
            <Setter Property="Height" Value="40"/>
            <Setter Property="Padding" Value="10,0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style TargetType="TextBlock" x:Key="InputLabel">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#4A5568"/>
            <Setter Property="Margin" Value="0,10,0,5"/>
        </Style>
    </Window.Resources>

    <Border Background="White" CornerRadius="15" Margin="20" Padding="30">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" Opacity="0.2"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Text="HỒ SƠ NHÂN SỰ MỚI" FontSize="24" FontWeight="Bold" Foreground="#1A3D64" Margin="0,0,0,15"/>

            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="0,0,10,0">
                <StackPanel>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel>
                            <Border Width="120" Height="120" CornerRadius="60" BorderThickness="1" BorderBrush="#CBD5E0">
                                <Border.Background>
                                    <ImageBrush ImageSource="{Binding AvatarSource}" Stretch="UniformToFill"/>
                                </Border.Background>
                            </Border>
                            <Button Content="Tải ảnh" Command="{Binding UploadImageCommand}" Margin="0,10,0,0" Padding="10,5"/>
                        </StackPanel>

                        <Grid Grid.Column="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Họ đệm *" Style="{StaticResource InputLabel}" Foreground="#C53030"/>
                                <TextBox Text="{Binding LastName}"/>
                                <TextBlock Text="Email" Style="{StaticResource InputLabel}"/>
                                <TextBox Text="{Binding Email}"/>
                                <TextBlock Text="Ngày sinh" Style="{StaticResource InputLabel}"/>
                                <DatePicker SelectedDate="{Binding BirthDate}" Height="40"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Tên *" Style="{StaticResource InputLabel}" Foreground="#C53030"/>
                                <TextBox Text="{Binding FirstName}"/>
                                <TextBlock Text="Số điện thoại" Style="{StaticResource InputLabel}"/>
                                <TextBox Text="{Binding Phone}"/>
                                <TextBlock Text="Giới tính" Style="{StaticResource InputLabel}"/>
                                <ComboBox SelectedValue="{Binding Gender}" SelectedValuePath="Content" Height="40">
                                    <ComboBoxItem Content="Male"/>
                                    <ComboBoxItem Content="Female"/>
                                    <ComboBoxItem Content="Other"/>
                                </ComboBox>
                            </StackPanel>
                        </Grid>
                    </Grid>

                    <TextBlock Text="Địa chỉ thường trú" Style="{StaticResource InputLabel}"/>
                    <TextBox Text="{Binding Address}"/>

                    <TextBlock Text="THÔNG TIN CÔNG VIỆC" FontSize="16" FontWeight="Bold" Foreground="#2B6CB0" Margin="0,25,0,10"/>
                    <Border Background="#F7FAFC" CornerRadius="8" Padding="15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel>
                                <TextBlock Text="Phòng ban" Style="{StaticResource InputLabel}"/>
                                <ComboBox ItemsSource="{Binding Departments}" SelectedItem="{Binding SelectedDepartment}" DisplayMemberPath="DepartmentName" Height="40"/>

                                <TextBlock Text="Chức vụ" Style="{StaticResource InputLabel}"/>
                                <ComboBox ItemsSource="{Binding Positions}" SelectedItem="{Binding SelectedPosition}" DisplayMemberPath="Title" Height="40"/>

                                <TextBlock Text="Lương cơ bản *" Style="{StaticResource InputLabel}" Foreground="#C53030"/>
                                <TextBox Text="{Binding SalaryString}"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Quản lý trực tiếp" Style="{StaticResource InputLabel}"/>
                                <ComboBox ItemsSource="{Binding Managers}" SelectedItem="{Binding SelectedManager}" DisplayMemberPath="FullName" Height="40"/>

                                <TextBlock Text="Loại hợp đồng" Style="{StaticResource InputLabel}"/>
                                <ComboBox SelectedValue="{Binding ContractType}" SelectedValuePath="Content" Height="40">
                                    <ComboBoxItem Content="Full-time"/>
                                    <ComboBoxItem Content="Part-time"/>
                                    <ComboBoxItem Content="Internship"/>
                                </ComboBox>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Margin="0,0,5,0">
                                        <TextBlock Text="Ngày bắt đầu" Style="{StaticResource InputLabel}"/>
                                        <DatePicker SelectedDate="{Binding StartDate}" Height="40"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Margin="5,0,0,0">
                                        <TextBlock Text="Ngày kết thúc" Style="{StaticResource InputLabel}"/>
                                        <DatePicker SelectedDate="{Binding EndDate}" Height="40"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <TextBlock Text="TÀI KHOẢN ĐĂNG NHẬP" FontSize="16" FontWeight="Bold" Foreground="#2B6CB0" Margin="0,25,0,10"/>
                    <Border Background="#FFFFF0" CornerRadius="8" Padding="15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel>
                                <TextBlock Text="Tên đăng nhập *" Style="{StaticResource InputLabel}" Foreground="#C53030"/>
                                <TextBox Text="{Binding Username}"/>
                                <TextBlock Text="Vai trò (Role)" Style="{StaticResource InputLabel}"/>
                                <ComboBox ItemsSource="{Binding Roles}" SelectedItem="{Binding SelectedRole}" DisplayMemberPath="RoleName" Height="40"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Mật khẩu *" Style="{StaticResource InputLabel}" Foreground="#C53030"/>
                                <PasswordBox x:Name="pBox" Height="40"/>
                                <TextBlock Text="Xác nhận mật khẩu *" Style="{StaticResource InputLabel}" Foreground="#C53030"/>
                                <PasswordBox x:Name="pBoxConfirm" Height="40"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                <Button Content="Hủy Bỏ" 
                        Command="{Binding CancelCommand}" 
                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                        Width="100" Height="40" Margin="0,0,10,0" Background="White" BorderBrush="#CBD5E0" BorderThickness="1"/>

                <Button Content="💾 Lưu Hồ Sơ" 
                        Command="{Binding SaveCommand}"
                        Width="150" Height="40" Background="#1A3D64" Foreground="White" FontWeight="Bold">
                    <Button.CommandParameter>
                        <MultiBinding Converter="{StaticResource MultiParamConverter}">
                            <Binding RelativeSource="{RelativeSource AncestorType=Window}"/>
                            <Binding ElementName="pBox"/>
                            <Binding ElementName="pBoxConfirm"/>
                        </MultiBinding>
                    </Button.CommandParameter>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</Window>