<UserControl x:Class="HumanResourcesManagementSystemFinal.Views.EmployeePayrollControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
             mc:Ignorable="d" 
             d:DesignHeight="850" d:DesignWidth="1000" Background="#F1F5F9">

    <UserControl.Resources>
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#1E293B"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <Style x:Key="PayrollLabelStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#64748B"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <Style x:Key="PayrollValueStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#1E293B"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="2">
            <Grid Margin="0,0,0,10">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Content="&lt;" Command="{Binding PreviousMonthCommand}" Background="Transparent" BorderThickness="0" Cursor="Hand" FontSize="18" Foreground="#64748B"/>
                    <TextBlock Text="{Binding SelectedMonth, StringFormat='    Tháng {0}, 2026    '}" FontSize="18" FontWeight="Bold" Foreground="#1E293B" Margin="20,0"/>
                    <Button Content="&gt;" Command="{Binding NextMonthCommand}" Background="Transparent" BorderThickness="0" Cursor="Hand" FontSize="18" Foreground="#64748B"/>
                </StackPanel>
            </Grid>

            <Border Background="White" CornerRadius="12" Padding="30,20" Margin="0,0,5,15">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="15" Opacity="0.05" Color="Black" ShadowDepth="2"/>
                </Border.Effect>
                <StackPanel>
                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="119*"/>
                            <ColumnDefinition Width="339*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Tổng thu nhập (1) :" Style="{StaticResource PayrollLabelStyle}" Grid.ColumnSpan="2"/>
                        <TextBlock Text="{Binding CurrentEmployeePayroll.TotalIncome, StringFormat={}{0:N0} VNĐ}" Style="{StaticResource PayrollValueStyle}" FontSize="16" Grid.Column="1" HorizontalAlignment="Left" Margin="678,0,0,0"/>
                    </Grid>
                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="119*"/>
                            <ColumnDefinition Width="339*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Tổng khấu trừ (2) :" Style="{StaticResource PayrollLabelStyle}" Grid.ColumnSpan="2"/>
                        <TextBlock Text="{Binding AdvancePayment, StringFormat={}{0:N0} VNĐ}" Style="{StaticResource PayrollValueStyle}" FontSize="16" Grid.Column="1" HorizontalAlignment="Left" Margin="678,0,0,0"/>
                    </Grid>
                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="119*"/>
                            <ColumnDefinition Width="339*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Tạm ứng (3) :" Style="{StaticResource PayrollLabelStyle}" Grid.ColumnSpan="2"/>
                        <TextBlock Text="{Binding AdvancePayment, StringFormat={}{0:N0} VNĐ}" Style="{StaticResource PayrollValueStyle}" FontSize="16" Grid.Column="1" HorizontalAlignment="Left" Margin="678,0,0,0"/>
                    </Grid>

                    <Separator Margin="0,5" Background="#CBCBCB" Height="5"/>

                    <Grid>
                        <StackPanel>
                            <TextBlock Text="Lương thực lĩnh (4) :" FontWeight="Bold" FontSize="17" />
                            <TextBlock Text="(4) = (1) - (2) - (3)" FontSize="12" Foreground="#94A3B8" FontStyle="Italic" Margin="0,3,0,0"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <TextBlock Text="{Binding CurrentEmployeePayroll.NetSalary, StringFormat={}{0:N0} VNĐ}" Foreground="#10B981" FontSize="26" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,20,0"/>
                            <Border Background="#FEE2E2" CornerRadius="8" Padding="15,8" VerticalAlignment="Center">
                                <TextBlock Text="ĐÃ THANH TOÁN" Foreground="#EF4444" FontWeight="Bold" FontSize="12"/>
                            </Border>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="25" Margin="0,0,10,0">
                    <StackPanel>
                        <TextBlock Text="Chi tiết trả lương" Style="{StaticResource SectionHeaderStyle}" Height="26" Width="423" FontSize="16"/>

                        <Grid Margin="0,10">
                            <TextBlock Text="Lương thực lĩnh (1)" Style="{StaticResource PayrollLabelStyle}"/>
                            <TextBlock Text="{Binding CurrentEmployeePayroll.NetSalary, StringFormat={}{0:N0} đ}" Style="{StaticResource PayrollValueStyle}"/>
                        </Grid>
                        <Grid Margin="0,10">
                            <TextBlock Text="Số được trả đợt này (2)" Style="{StaticResource PayrollLabelStyle}"/>
                            <TextBlock Text="{Binding CurrentEmployeePayroll.NetSalary, StringFormat={}{0:N0} đ}" Style="{StaticResource PayrollValueStyle}"/>
                        </Grid>
                        <Grid Margin="0,10">
                            <TextBlock Text="Số còn nợ đợt này (3)" Style="{StaticResource PayrollLabelStyle}"/>
                            <TextBlock Text="0 đ" Style="{StaticResource PayrollValueStyle}"/>
                        </Grid>
                        <Grid Margin="0,10">
                            <TextBlock Text="Trả nợ lương (4)" Style="{StaticResource PayrollLabelStyle}"/>
                            <TextBlock Text="0 đ" Style="{StaticResource PayrollValueStyle}"/>
                        </Grid>

                        <Separator Margin="0,15" Background="#F8FAFC"/>

                        <Grid Margin="0,5">
                            <TextBlock Text="Tổng tiền được chi trả (5)" FontWeight="Bold" FontSize="16"/>
                            <TextBlock Text="{Binding CurrentEmployeePayroll.NetSalary, StringFormat={}{0:N0} đ}" FontWeight="Bold" FontSize="14" HorizontalAlignment="Right"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <StackPanel Grid.Column="1" Margin="5,0,0,0">
                    <Border Background="White" CornerRadius="12" Padding="20" Margin="0,0,0,10">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                <TextBlock Text="Khoản thu nhập" Style="{StaticResource SectionHeaderStyle}" Margin="0" FontSize="16"/>
                                <Border Background="#F1F5F9" CornerRadius="10" Padding="8,2" Margin="10,0,0,0" VerticalAlignment="Center">
                                    <TextBlock Text="3" FontSize="11" Foreground="#64748B" FontWeight="Bold"/>
                                </Border>
                            </StackPanel>

                            <Grid Margin="0,8">
                                <TextBlock Text="Lương cơ bản" Style="{StaticResource PayrollLabelStyle}"/>
                                <TextBlock Text="{Binding CurrentEmployeePayroll.ContractSalary, StringFormat={}{0:N0} đ}" Style="{StaticResource PayrollValueStyle}"/>
                            </Grid>
                            <Grid Margin="0,8">
                                <TextBlock Text="Quà ngày Lễ" Style="{StaticResource PayrollLabelStyle}"/>
                                <TextBlock Text="2.000.000 đ" Style="{StaticResource PayrollValueStyle}"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <Border Background="White" CornerRadius="12" Padding="25" Height="276">
                        <StackPanel>
                            <lvc:CartesianChart Height="200" Hoverable="True" DisableAnimations="False">
                                <lvc:CartesianChart.Series>
                                    <lvc:ColumnSeries Values="5, 8, 14, 16, 18" Fill="#67E8F9" MaxColumnWidth="30"/>
                                </lvc:CartesianChart.Series>
                                <lvc:CartesianChart.AxisX>
                                    <lvc:Axis Labels="Mục 1, Mục 2, Mục 3, Mục 4, Mục 5" ShowLabels="True">
                                        <lvc:Axis.Separator>
                                            <lvc:Separator Step="1" IsEnabled="False"/>
                                        </lvc:Axis.Separator>
                                    </lvc:Axis>
                                </lvc:CartesianChart.AxisX>
                            </lvc:CartesianChart>
                            <TextBlock Text="Biểu đồ thu nhập trong năm" HorizontalAlignment="Center" Margin="0,10,0,0" Foreground="#64748B" FontStyle="Italic"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </StackPanel>
    </ScrollViewer>
</UserControl>